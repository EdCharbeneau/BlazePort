@page "/admin/ports"
@inherits AdminPortsBase

<a href="/admin/index">Admin Home</a>
<h3>Admin Ports</h3>

<button @onclick="@OpenEditor">Add New Record</button>

<TelerikWindow Class="@PanelCss" Visible="EditorVisible">
    <TelerikWindowActions>
        <TelerikWindowAction Name="Close" Icon="close" OnClick="CloseEditor" />
    </TelerikWindowActions>
    <TelerikWindowTitle>
        <strong>New Port Details</strong>
    </TelerikWindowTitle>
    <TelerikWindowContent>
        <EditForm Model="portForm" OnValidSubmit="@SaveLocation">
            <DataAnnotationsValidator />
            <div class="form-group">
                <label>Name</label>
                <InputText @bind-Value="@portForm.Name" Class="form-control" />
                <ValidationMessage For="@(()=> portForm.Name)"></ValidationMessage>
            </div>
            <div class="form-group">
                <label>Description</label>
                <InputTextArea @bind-Value="@portForm.Description" Class="form-control" />
                <ValidationMessage For="@(()=> portForm.Description)"></ValidationMessage>
            </div>
            <div class="form-group">
                <label>Country</label>
                <InputTextArea @bind-Value="@portForm.Country" Class="form-control" />
                <ValidationMessage For="@(()=> portForm.Country)"></ValidationMessage>
            </div>
            <div class="form-group">
                <label>Image URL</label>
                <InputText @bind-Value="@portForm.ImageUrl" Class="form-control" />
            </div>
            <div class="form-group">
                <label>Parent Location</label>
                <InputSelect @bind-Value="@portForm.SelectedLocation" Class="form-control">
                    <option value="">--Select a location</option>
                    @if (locations != null)
                    {
                        @foreach (var location in locations)
                        {
                            <option value="@location.Id">@location.Name</option>
                        }
                    }
                </InputSelect>
                <ValidationMessage For="@(()=> portForm.SelectedLocation)"></ValidationMessage>
            </div>
            <button>Save</button>
        </EditForm>
    </TelerikWindowContent>
</TelerikWindow>

<TelerikGrid Data="portsGridView"
             Sortable="true"
             Pageable="true"
             FilterMode="FilterMode.FilterMenu">
    <TelerikGridColumns>
        <TelerikGridColumn Field="@nameof(PortDetailsGridView.Name)" />
        <TelerikGridColumn Field="@nameof(PortDetailsGridView.LatLong)" />
        <TelerikGridColumn Field="@nameof(PortDetailsGridView.Country)" />
        <TelerikGridColumn Field="@nameof(PortDetailsGridView.LocationName)" />
        <TelerikGridColumn Field="@nameof(PortDetailsGridView.ShortDescription)" />
    </TelerikGridColumns>
</TelerikGrid>